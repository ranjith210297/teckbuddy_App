<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='registration_css.css') }}">

<script>
  function validateForm(event) {
var Username = document.forms["myform"]["uname"].value;
var Email = document.forms["myform"]["email"].value;
var Gender = document.forms["myform"]["gender"].value;
var Password = document.forms["myform"]["pwd"].value;
var Cpassword = document.forms["myform"]["cpwd"].value;


var UserG = CheckDetails(Username,Email,Password,Cpassword);
var email_check = ValidateEmail(Email);
var password_check = CheckPassword(Password);
var cpassword_check = CheckCPassword(Cpassword);



if (email_check === true && password_check === true && cpassword_check === true && password_check === cpassword_check && UserG === true) {
return true;
}

return false;
event.preventDefault();

}

function CheckDetails(inp1,inp2,inp3,inp4) {
var input1 = inp1;
var input2 = inp2;
var input3 = inp3;
var input4 = inp4;
if (input1 === "") {
  document.querySelector(".usermessage").innerHTML = "Enter username";
  return false;
}

if (input2 === "") {
  document.querySelector(".gendermessage").innerHTML = "Enter Email";
  return false;
}
if (input3 === "") {
  document.querySelector(".usermessage").innerHTML = "Enter Password";
  return false;
}

if (input4 === "") {
  document.querySelector(".gendermessage").innerHTML = "Enter Cpassword";
  return false;
}

return true;
}



function CheckPassword(password) {
var password = password;
var cap = 0;
var num = 0;
var small = 0;
var special = 0;



if (password.length < 6) {
  document.querySelector(".passmessage").innerHTML =
    "Password should alteast contain 6 characters.";
  return false;
}

for (let i = 0; i < password.length; i++) {
  var t = password.charCodeAt(i); 
  if (t >= 49 && t <= 57) {
    num++;
  }
  if (t >= 65 && t <= 90) {
    cap++;
  }
  if (t >= 97 && t <= 122) {
    small++;
  }
  if (t == 42 || t == 64 || t == 46 || t == 95) {
    special++;
  }
}

if (num >= 1 && cap >= 1 && small >= 1 && special >= 1) {
  return true;
} else {
  var msg =
    "Password should contain 6 charcters & atleast one small,capital,number,special character.";
  document.querySelector(".passmessage").innerHTML = msg;

  return false;
}
}


function CheckCPassword(password) {
var password = password;
var cap = 0;
var num = 0;
var small = 0;
var special = 0;


if (password.length < 6) {
  document.querySelector(".cpassmessage").innerHTML =
    "Password should alteast contain 6 characters.";
  return false;
}

for (let i = 0; i < password.length; i++) {
  var t = password.charCodeAt(i); 
  if (t >= 49 && t <= 57) {
    num++;
  }
  if (t >= 65 && t <= 90) {
    cap++;
  }
  if (t >= 97 && t <= 122) {
    small++;
  }
  if (t == 42 || t == 64 || t == 46 || t == 95) {
    special++;
  }
}

if (num >= 1 && cap >= 1 && small >= 1 && special >= 1) {
  return true;
} else {
  var msg =
    "Password should contain 6 charcters & atleast one small,capital,number,special character.";
  document.querySelector(".cpassmessage").innerHTML = msg;

  return false;
}
}


function ValidateEmail(email) {
var e = email;
var parts = e.split("@");

var message = "Invalid Email";
var atSymbol = e.indexOf("@");

if (atSymbol < 1) {
  document.querySelector(".emailmessage").innerHTML = message;
  return false;
}
var dot = atSymbol + parts[1].indexOf(".");
if (dot <= atSymbol + 2) {
  document.querySelector(".emailmessage").innerHTML = message;
  return false;
}

if (dot === e.length - 1) {
  document.querySelector(".emailmessage").innerHTML = message;
  return false;
}

return true;
}



</script>

 

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
 <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm" crossorigin="anonymous"></script>  

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


</head>



<body>
 <div class="container">
    <div class = "heading1"
        <h1>Register</h1>
    </div>
    <p>Please fill in this form to create an account.</p>
    <hr>

  <div class="container" id="main">
    <div class="registration">
      <form name="myform">
        <p style="color:red;">{{ message }}</p>
        <label for="uname">UserName</label><br />
        <input type="text" id="uname" name="uname" /><br />
         <p style="color:red;" class="usermessage"></p><br />
        <label for="email">Email ID</label><br />
        <input type="text" id="email" name="email" /><br />
         <p style="color:red;" class="emailmessage"></p><br />
        <input type="radio" id="male" name="gender" value="male" />
        <label for="male">Male</label>
        <input type="radio" id="female" name="gender" value="female" /> 
        <label for="female">Female</label><br />
        
         <p style="color:red;" class="gendermessage"></p><br />

        <label for="pwd">Password</label><br />
        <input type="password" id="pwd" name="pwd" /><br />
         <p style="color:red;" class="passmessage"></p><br />

        <label for="cpwd">Confirm_Password</label><br />
        <input type="password" id="cpwd" name="cpwd" /><br />
         <p style="color:red;" class="cpassmessage"></p><br />

        <hr>
        

          <div>
        <button type="submit"  class = registerbtn id="regbtn" formmethod="POST" onclick="return validateForm()" formaction="{{ url_for('register') }}">Register</button>

          
          <button type="submit"  class = registerbtn formmethod="GET"
          formaction="{{ url_for('login') }}">Login</button>

          </div>

        


          

        <div class="container signin">
              <p>Already have an account? Please Login</a>.</p>
        </div>


      </form> 
    </div>
  </div>


  </div>
  
  </body>

  

  </html>